# Visual Flow Guide - Understanding Data Flow in Clean Architecture

**Purpose:** Visual diagrams to help understand how data flows through the application  
**Best for:** Visual learners who need to see the connections

---

## Table of Contents

1. [Architecture Layers - Visual Overview](#1-architecture-layers---visual-overview)
2. [Login Flow - Detailed Visual](#2-login-flow---detailed-visual)
3. [Download ES Data Flow](#3-download-es-data-flow)
4. [Environment Switching Mechanism](#4-environment-switching-mechanism)
5. [Dependency Injection Visualization](#5-dependency-injection-visualization)
6. [Package Structure Map](#6-package-structure-map)

---

## 1. Architecture Layers - Visual Overview

### The Three Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                        â”‚
â”‚                         PRESENTATION LAYER                            â”‚
â”‚                     (User Interface & State)                          â”‚
â”‚                                                                        â”‚
â”‚  What: Everything the user sees and interacts with                    â”‚
â”‚  Location: app/src/main/java/.../ui/                                  â”‚
â”‚  Dependencies: Can use Domain Layer                                   â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚                    â”‚        â”‚                    â”‚                â”‚
â”‚  â”‚  LoginScreen.kt    â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ LoginViewModel.kt  â”‚                â”‚
â”‚  â”‚                    â”‚        â”‚                    â”‚                â”‚
â”‚  â”‚  - Text fields     â”‚ calls  â”‚  - State mgmt      â”‚                â”‚
â”‚  â”‚  - Buttons         â”‚        â”‚  - Event handling  â”‚                â”‚
â”‚  â”‚  - Displays data   â”‚        â”‚  - Calls use cases â”‚                â”‚
â”‚  â”‚                    â”‚        â”‚                    â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                           â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â”‚ Dependency
                                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                        â”‚
â”‚                          DOMAIN LAYER                                 â”‚
â”‚                  (Business Logic & Rules)                             â”‚
â”‚                                                                        â”‚
â”‚  What: Core business logic, no Android dependencies                   â”‚
â”‚  Location: app/src/main/java/.../domain/                              â”‚
â”‚  Dependencies: NONE (completely independent)                          â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                â”‚   â”‚                â”‚   â”‚                â”‚       â”‚
â”‚  â”‚ Use Cases      â”‚   â”‚ Entities       â”‚   â”‚ Repositories   â”‚       â”‚
â”‚  â”‚                â”‚   â”‚                â”‚   â”‚ (Interfaces)   â”‚       â”‚
â”‚  â”‚ LoginUseCase   â”‚   â”‚ User           â”‚   â”‚ AuthRepository â”‚       â”‚
â”‚  â”‚ DownloadUseCaseâ”‚   â”‚ JobCard        â”‚   â”‚ ESRepository   â”‚       â”‚
â”‚  â”‚                â”‚   â”‚                â”‚   â”‚                â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚           â”‚                                                           â”‚
â”‚           â”‚ Calls interface (not implementation!)                    â”‚
â”‚           â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ Interface contract
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                        â”‚
â”‚                           DATA LAYER                                  â”‚
â”‚                   (Implementation Details)                            â”‚
â”‚                                                                        â”‚
â”‚  What: Actual data operations (network, database, files)              â”‚
â”‚  Location: app/src/main/java/.../data/                                â”‚
â”‚  Dependencies: Domain Layer (implements interfaces)                   â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚   â”‚
â”‚  â”‚ Repositories     â”‚  â”‚ API              â”‚  â”‚ Database         â”‚   â”‚
â”‚  â”‚ (Implementation) â”‚  â”‚                  â”‚  â”‚                  â”‚   â”‚
â”‚  â”‚                  â”‚  â”‚ REST API calls   â”‚  â”‚ Room DB          â”‚   â”‚
â”‚  â”‚ AuthRepoImpl     â”‚â”€â–¶â”‚ ElectronicSvc    â”‚  â”‚ DAOs             â”‚   â”‚
â”‚  â”‚ ESRepoImpl       â”‚  â”‚ API              â”‚  â”‚ Entities         â”‚   â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Login Flow - Detailed Visual

### Complete Flow with All Files

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ï¿½ï¿½â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 1: User Interaction                                                   â”‚
â”‚ File: ui/auth/LoginScreen.kt                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    User types username: "john@example.com"
    User types password: "secretpass123"
    User clicks: [Login] button
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  onClick = {                    â”‚
    â”‚    viewModel.login(             â”‚
    â”‚      username = "john@...",     â”‚
    â”‚      password = "secret..."     â”‚
    â”‚    )                            â”‚
    â”‚  }                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 2: ViewModel Receives Event                                           â”‚
â”‚ File: ui/auth/LoginViewModel.kt                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ @HiltViewModel                                     â”‚
    â”‚ class LoginViewModel @Inject constructor(          â”‚
    â”‚     private val loginUseCase: LoginUseCase         â”‚
    â”‚ ) : ViewModel() {                                  â”‚
    â”‚                                                     â”‚
    â”‚     fun login(username: String, password: String) {â”‚
    â”‚         viewModelScope.launch {                    â”‚
    â”‚             // 1. Update UI: Show loading          â”‚
    â”‚             _uiState.update {                      â”‚
    â”‚                 it.copy(isLoading = true)          â”‚
    â”‚             }                                       â”‚
    â”‚                                                     â”‚
    â”‚             // 2. Call use case                    â”‚â”€â”€â”
    â”‚             loginUseCase(username, password)       â”‚  â”‚
    â”‚                 .onSuccess { user ->               â”‚  â”‚
    â”‚                     _uiState.update {              â”‚  â”‚
    â”‚                         it.copy(                   â”‚  â”‚
    â”‚                             isLoading = false,     â”‚  â”‚
    â”‚                             loginSuccess = true    â”‚  â”‚
    â”‚                         )                          â”‚  â”‚
    â”‚                     }                              â”‚  â”‚
    â”‚                 }                                  â”‚  â”‚
    â”‚                 .onFailure { error ->              â”‚  â”‚
    â”‚                     _uiState.update {              â”‚  â”‚
    â”‚                         it.copy(                   â”‚  â”‚
    â”‚                             isLoading = false,     â”‚  â”‚
    â”‚                             error = error.message  â”‚  â”‚
    â”‚                         )                          â”‚  â”‚
    â”‚                     }                              â”‚  â”‚
    â”‚                 }                                  â”‚  â”‚
    â”‚         }                                          â”‚  â”‚
    â”‚     }                                              â”‚  â”‚
    â”‚ }                                                  â”‚  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                                             â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 3: Use Case Validates and Delegates                                   â”‚
â”‚ File: domain/usecase/LoginUseCase.kt                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ class LoginUseCase @Inject constructor(            â”‚
    â”‚     private val authRepository: AuthRepository     â”‚â”€â”€â”€â”
    â”‚ ) {                                                â”‚   â”‚ Interface!
    â”‚     suspend operator fun invoke(                   â”‚   â”‚ Not impl!
    â”‚         username: String,                          â”‚   â”‚
    â”‚         password: String                           â”‚   â”‚
    â”‚     ): Result<User> {                              â”‚   â”‚
    â”‚                                                     â”‚   â”‚
    â”‚         // Business logic: Validation              â”‚   â”‚
    â”‚         if (username.isBlank()) {                  â”‚   â”‚
    â”‚             return Result.failure(                 â”‚   â”‚
    â”‚                 Exception("Username required")     â”‚   â”‚
    â”‚             )                                      â”‚   â”‚
    â”‚         }                                          â”‚   â”‚
    â”‚                                                     â”‚   â”‚
    â”‚         // Delegate to repository                  â”‚   â”‚
    â”‚         return authRepository.login(â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”˜
    â”‚             username,                              â”‚
    â”‚             password                               â”‚
    â”‚         )                                          â”‚
    â”‚     }                                              â”‚
    â”‚ }                                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ domain/repository/AuthRepository.kt (INTERFACE)    â”‚
    â”‚                                                     â”‚
    â”‚ interface AuthRepository {                         â”‚
    â”‚     suspend fun login(                             â”‚
    â”‚         username: String,                          â”‚
    â”‚         password: String                           â”‚
    â”‚     ): Result<User>                                â”‚
    â”‚ }                                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ Hilt finds implementation â†“
              â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 4: Repository Implementation Does the Work                            â”‚
â”‚ File: data/repository/AuthRepositoryImpl.kt                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ class AuthRepositoryImpl @Inject constructor(      â”‚
    â”‚     private val api: ElectronicServicesApi         â”‚
    â”‚ ) : AuthRepository {                               â”‚
    â”‚                                                     â”‚
    â”‚     override suspend fun login(                    â”‚
    â”‚         username: String,                          â”‚
    â”‚         password: String                           â”‚
    â”‚     ): Result<User> {                              â”‚
    â”‚         return try {                               â”‚
    â”‚             // 1. Create request DTO                â”‚
    â”‚             val request = LoginRequestDto(         â”‚
    â”‚                 username = username,               â”‚
    â”‚                 password = password                â”‚
    â”‚             )                                      â”‚
    â”‚                                                     â”‚
    â”‚             // 2. Call API                         â”‚â”€â”€â”
    â”‚             val response = api.login(request)      â”‚  â”‚
    â”‚                                                     â”‚  â”‚
    â”‚             // 3. Convert DTO to Domain            â”‚  â”‚
    â”‚             val user = response.toDomain()         â”‚  â”‚
    â”‚                                                     â”‚  â”‚
    â”‚             // 4. Return success                   â”‚  â”‚
    â”‚             Result.success(user)                   â”‚  â”‚
    â”‚         } catch (e: Exception) {                   â”‚  â”‚
    â”‚             Result.failure(e)                      â”‚  â”‚
    â”‚         }                                          â”‚  â”‚
    â”‚     }                                              â”‚  â”‚
    â”‚ }                                                  â”‚  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 5: API Makes Network Call                                             â”‚
â”‚ File: data/api/MockElectronicServicesApi.kt                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ class MockElectronicServicesApi :                  â”‚
    â”‚     ElectronicServicesApi {                        â”‚
    â”‚                                                     â”‚
    â”‚     override suspend fun login(                    â”‚
    â”‚         request: LoginRequestDto                   â”‚
    â”‚     ): Result<LoginResponseDto> {                  â”‚
    â”‚         // In production: HTTP POST request        â”‚
    â”‚         // For now: Return mock data               â”‚
    â”‚                                                     â”‚
    â”‚         return Result.success(                     â”‚
    â”‚             LoginResponseDto(                      â”‚
    â”‚                 userId = "123",                    â”‚
    â”‚                 username = request.username,       â”‚
    â”‚                 token = "fake-jwt-token"           â”‚
    â”‚             )                                      â”‚
    â”‚         )                                          â”‚
    â”‚     }                                              â”‚
    â”‚ }                                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    Result flows back up through all layers
              â”‚
              â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 6: ViewModel Updates State                                            â”‚
â”‚ File: ui/auth/LoginViewModel.kt                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Result<User> arrives at ViewModel
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ .onSuccess { user ->                               â”‚
    â”‚     _uiState.update {                              â”‚
    â”‚         it.copy(                                   â”‚
    â”‚             isLoading = false,                     â”‚
    â”‚             loginSuccess = true,                   â”‚
    â”‚             user = user                            â”‚
    â”‚         )                                          â”‚
    â”‚     }                                              â”‚
    â”‚ }                                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 7: UI Reacts to State Change                                          â”‚
â”‚ File: ui/auth/LoginScreen.kt                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ val uiState by viewModel.uiState                   â”‚
    â”‚     .collectAsStateWithLifecycle()                 â”‚
    â”‚                                                     â”‚
    â”‚ // State changed: loginSuccess = true              â”‚
    â”‚                                                     â”‚
    â”‚ LaunchedEffect(uiState.loginSuccess) {             â”‚
    â”‚     if (uiState.loginSuccess) {                    â”‚
    â”‚         // Navigate to main screen                 â”‚
    â”‚         navController.navigate("main")             â”‚
    â”‚     }                                              â”‚
    â”‚ }                                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
         User sees main screen!
```

---

## 3. Download ES Data Flow

### Multi-Service Download (Project Environment)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USER ACTION: Tap "Download" in ManageESBottomSheet                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ManageESViewModel.downloadESData()                                          â”‚
â”‚                                                                             â”‚
â”‚ 1. Check environment                                                        â”‚
â”‚    val environment = configuration.getCurrentEnvironment()                 â”‚
â”‚                                                                             â”‚
â”‚ 2. Choose download strategy:                                               â”‚
â”‚    - Wildfire: Single service download                                     â”‚
â”‚    - Project: Multi-service download                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚
        â–¼                   â–¼
   [Wildfire]          [Project]
    Single              Multiple
   Service             Services

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PROJECT MODE: Download Two Services in Parallel                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    manageESFacade.downloadAllServices(extent)
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ DownloadAllServicesUseCase                            â”‚
    â”‚                                                        â”‚
    â”‚ Services to download:                                 â”‚
    â”‚ 1. Operations (URL from config)                       â”‚
    â”‚ 2. Basemap (URL from config)                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                          â–¼                          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Service 1:      â”‚      â”‚  Service 2:      â”‚      â”‚  Progress        â”‚
    â”‚  Operations      â”‚      â”‚  Basemap         â”‚      â”‚  Aggregation     â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                  â”‚      â”‚                  â”‚      â”‚ Combines:        â”‚
    â”‚ Download:        â”‚      â”‚ Download:        â”‚      â”‚ - Service 1: 45% â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚ - Service 2: 78% â”‚
    â”‚ â”‚  â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘  â”‚ â”‚      â”‚ â”‚  â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘  â”‚ â”‚      â”‚                  â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚ Overall: 61.5%   â”‚
    â”‚ 45%              â”‚      â”‚ 78%              â”‚      â”‚                  â”‚
    â”‚                  â”‚      â”‚                  â”‚      â”‚ Shows to user:   â”‚
    â”‚ Status:          â”‚      â”‚ Status:          â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ "Downloading     â”‚      â”‚ "Processing      â”‚      â”‚ â”‚  â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘  â”‚ â”‚
    â”‚  features..."    â”‚      â”‚  geometries..."  â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                  â”‚      â”‚                  â”‚      â”‚ 61% Complete     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                          â”‚                          â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RESULT: Two Geodatabase Files Created                                       â”‚
â”‚                                                                              â”‚
â”‚ Files on disk:                                                               â”‚
â”‚ â”œâ”€â”€ Operations.geodatabase (8.5 MB)                                         â”‚
â”‚ â”‚   â”œâ”€â”€ Feature tables: 12                                                  â”‚
â”‚ â”‚   â”œâ”€â”€ Features: 2,450                                                     â”‚
â”‚ â”‚   â””â”€â”€ Display on map: NO (only in Table of Contents)                     â”‚
â”‚ â”‚                                                                            â”‚
â”‚ â””â”€â”€ Basemap.geodatabase (12.3 MB)                                           â”‚
â”‚     â”œâ”€â”€ Feature tables: 8                                                   â”‚
â”‚     â”œâ”€â”€ Features: 5,680                                                     â”‚
â”‚     â””â”€â”€ Display on map: YES                                                 â”‚
â”‚                                                                              â”‚
â”‚ Table of Contents shows:                                                    â”‚
â”‚ â”œâ”€â”€ [Operations]                                                            â”‚
â”‚ â”‚   â”œâ”€â”€ â˜‘ OP_PipelineLayer                                                 â”‚
â”‚ â”‚   â”œâ”€â”€ â˜‘ OP_ValveLayer                                                    â”‚
â”‚ â”‚   â””â”€â”€ â˜‘ OP_AssetLayer                                                    â”‚
â”‚ â”‚                                                                            â”‚
â”‚ â””â”€â”€ [Basemap]                                                               â”‚
â”‚     â”œâ”€â”€ â˜‘ BM_RoadsLayer                                                     â”‚
â”‚     â”œâ”€â”€ â˜‘ BM_BoundariesLayer                                                â”‚
â”‚     â””â”€â”€ â˜‘ BM_LabelsLayer                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ï¿½ï¿½â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Environment Switching Mechanism

### How Environment Detection Works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMPILE TIME: Build Configuration                                          â”‚
â”‚ File: app/build.gradle.kts                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    buildTypes {
        debug {
            buildConfigField("String", "ENVIRONMENT", "\"wildfire\"")
                                                            â†‘
                            Change this to "project" for production
        }
        release {
            buildConfigField("String", "ENVIRONMENT", "\"wildfire\"")
                                                            â†‘
                            Change this to "project" for production
        }
    }
              â”‚
              â”‚ Generated at compile time
              â–¼
    BuildConfig.ENVIRONMENT = "wildfire"  (or "project")
              â”‚
              â”‚ Available in code
              â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RUNTIME: Environment Detection                                              â”‚
â”‚ File: domain/config/FeatureServiceConfiguration.kt                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    fun getCurrentEnvironment(): AppEnvironment {
        val environmentType = BuildConfig.ENVIRONMENT
                                    â†‘
                          Read compile-time value
              â”‚
              â”‚
              â–¼
        when (environmentType.lowercase()) {
            "project" â†’ createProjectEnvironment()
            "wildfire" â†’ createWildfireEnvironment()
            else â†’ createWildfireEnvironment()  // Default
        }
    }

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ENVIRONMENT CONFIGURATIONS                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WILDFIRE (Development)          â”‚      â”‚  PROJECT (Production)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚      â”‚                                  â”‚
â”‚ Services: 1                      â”‚      â”‚ Services: 2                      â”‚
â”‚                                  â”‚      â”‚                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Service: Wildfire            â”‚ â”‚      â”‚ â”‚ Service 1: Operations        â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚      â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ URL: sampleserver6...        â”‚ â”‚      â”‚ â”‚ URL: your-project-server...  â”‚ â”‚
â”‚ â”‚ Prefix: GDB_                 â”‚ â”‚      â”‚ â”‚ Prefix: OP_                  â”‚ â”‚
â”‚ â”‚ Display: YES                 â”‚ â”‚      â”‚ â”‚ Display: NO                  â”‚ â”‚
â”‚ â”‚ Sync: YES                    â”‚ â”‚      â”‚ â”‚ Sync: YES                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚      â”‚                                  â”‚
â”‚ Characteristics:                 â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â€¢ Public access                  â”‚      â”‚ â”‚ Service 2: Basemap           â”‚ â”‚
â”‚ â€¢ No CA Certificate required     â”‚      â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â€¢ Sample data                    â”‚      â”‚ â”‚ URL: your-project-server...  â”‚ â”‚
â”‚ â€¢ Good for testing               â”‚      â”‚ â”‚ Prefix: BM_                  â”‚ â”‚
â”‚                                  â”‚      â”‚ â”‚ Display: YES                 â”‚ â”‚
â”‚                                  â”‚      â”‚ â”‚ Sync: YES                    â”‚ â”‚
â”‚                                  â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚      â”‚                                  â”‚
â”‚                                  â”‚      â”‚ Characteristics:                 â”‚
â”‚                                  â”‚      â”‚ â€¢ Internal network               â”‚
â”‚                                  â”‚      â”‚ â€¢ CA Certificate required        â”‚
â”‚                                  â”‚      â”‚ â€¢ Real production data           â”‚
â”‚                                  â”‚      â”‚ â€¢ Multiple data sources          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

              â”‚                                      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
              Used throughout application:
              
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ManageESViewModel                      â”‚
    â”‚                                        â”‚
    â”‚ val env = configuration                â”‚
    â”‚     .getCurrentEnvironment()           â”‚
    â”‚                                        â”‚
    â”‚ when (env) {                           â”‚
    â”‚     is Project â†’ downloadMultiple()    â”‚
    â”‚     is Wildfire â†’ downloadSingle()     â”‚
    â”‚ }                                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Switching Steps Visualized

```
Step 1: Edit build.gradle.kts
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ buildTypes {                            â”‚
â”‚     debug {                             â”‚
â”‚         buildConfigField(               â”‚
â”‚             "String",                   â”‚
â”‚             "ENVIRONMENT",              â”‚
â”‚             "\"wildfire\""  â†â”€â”€ CHANGE THIS
â”‚         )                  to "project" â”‚
â”‚     }                                   â”‚
â”‚ }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
Step 2: Sync Gradle
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Click: ğŸ˜ Sync Now                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
Step 3: Update URLs (if using project)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FeatureServiceConfiguration.kt          â”‚
â”‚                                         â”‚
â”‚ PROJECT_OPERATIONS_URL =                â”‚
â”‚   "https://your-server/...Operations"  â”‚
â”‚                  â†‘                      â”‚
â”‚         Update this URL                 â”‚
â”‚                                         â”‚
â”‚ PROJECT_BASEMAP_URL =                   â”‚
â”‚   "https://your-server/...Basemap"     â”‚
â”‚                  â†‘                      â”‚
â”‚         Update this URL                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
Step 4: Rebuild
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Build â†’ Rebuild Project                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
Step 5: Run
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Run the app                             â”‚
â”‚ Check logs for:                         â”‚
â”‚ "Project environment: 2 services"       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Dependency Injection Visualization

### How Hilt Wires Everything Together

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 1: Define What You Need (Constructor Injection)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    @HiltViewModel
    class LoginViewModel @Inject constructor(
        private val loginUseCase: LoginUseCase  â† "I need this!"
    ) : ViewModel()
              â†‘
              â”‚ Hilt sees @Inject
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Hilt: "Ok, I'll provide LoginUseCase"  â”‚
    â”‚       "But what does IT need?"         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 2: Check Dependencies Recursively                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    class LoginUseCase @Inject constructor(
        private val authRepository: AuthRepository  â† "I need this!"
    )                                                  (interface)
              â†‘
              â”‚ Hilt sees @Inject
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Hilt: "AuthRepository is interface"    â”‚
    â”‚       "Need to find implementation"    â”‚
    â”‚       "Let me check DI modules..."     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 3: Find Binding in DI Module                                          â”‚
â”‚ File: data/di/DataModule.kt                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    @Module
    @InstallIn(SingletonComponent::class)
    abstract class DataModule {
        
        @Binds
        abstract fun bindAuthRepository(
            impl: AuthRepositoryImpl      â† Use this implementation
        ): AuthRepository                 â† For this interface
    }
              â†‘
              â”‚ Hilt finds binding
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Hilt: "Found it! Use AuthRepoImpl"     â”‚
    â”‚       "Now what does THAT need?"       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 4: Continue Recursively                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    class AuthRepositoryImpl @Inject constructor(
        private val api: ElectronicServicesApi  â† "I need this!"
    ) : AuthRepository
              â†‘
              â”‚ Hilt checks what API needs
              â”‚
              â–¼
    class MockElectronicServicesApi @Inject constructor()
              â†‘
              â”‚ No dependencies!
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Hilt: "Done! I can create everything"  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 5: Build Dependency Graph                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    LoginViewModel
         â†“
    LoginUseCase
         â†“
    AuthRepository (interface)
         â†“
    AuthRepositoryImpl (implementation)
         â†“
    ElectronicServicesApi
         â†“
    MockElectronicServicesApi

    Hilt creates in reverse order:
    1. MockElectronicServicesApi (no dependencies)
    2. AuthRepositoryImpl (needs API)
    3. LoginUseCase (needs repository)
    4. LoginViewModel (needs use case)

â”Œâ”€â”€â”€â”€â”€â”€ï¿½ï¿½ï¿½â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RESULT: Fully Wired ViewModel                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    @Composable
    fun LoginScreen(
        viewModel: LoginViewModel = hiltViewModel()  â† Hilt provides this
    )
              â†‘
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Hilt magic: Fully constructed with      â”‚
    â”‚ all dependencies injected!              â”‚
    â”‚                                         â”‚
    â”‚ You don't have to:                      â”‚
    â”‚ - Create any objects manually           â”‚
    â”‚ - Pass dependencies manually            â”‚
    â”‚ - Worry about order                     â”‚
    â”‚ - Manage lifecycles                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Dependency Graph Visualization

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Application      â”‚
                    â”‚ (Entry Point)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚               â”‚               â”‚
             â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ LoginScreen  â”‚ â”‚ MapScreen    â”‚ â”‚ JobsScreen   â”‚
    â”‚              â”‚ â”‚              â”‚ â”‚              â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                â”‚                â”‚
           â”‚ hiltViewModel() â”‚ hiltViewModel()â”‚ hiltViewModel()
           â–¼                â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚LoginViewModelâ”‚ â”‚MapViewModel  â”‚ â”‚JobsViewModel â”‚
    â”‚              â”‚ â”‚              â”‚ â”‚              â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                â”‚                â”‚
           â”‚ @Inject        â”‚ @Inject        â”‚ @Inject
           â–¼                â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Use Cases    â”‚ â”‚  Facades     â”‚ â”‚ Use Cases    â”‚
    â”‚              â”‚ â”‚              â”‚ â”‚              â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                â”‚                â”‚
           â”‚ @Inject        â”‚ @Inject        â”‚ @Inject
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Repositories â”‚
                    â”‚ (Interfaces) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ @Binds in Module
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Repository   â”‚
                    â”‚ Implementations
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚               â”‚               â”‚
           â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     API      â”‚ â”‚   Database   â”‚ â”‚ Preferences  â”‚
    â”‚              â”‚ â”‚              â”‚ â”‚              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Package Structure Map

### Complete Project Structure

```
com.enbridge.gdsgpscollection/
â”‚
â”œâ”€â”€â”€ ğŸ“± PRESENTATION LAYER (UI)
â”‚    â”‚
â”‚    â”œâ”€â”€ ui/
â”‚    â”‚   â”œâ”€â”€ auth/
â”‚    â”‚   â”‚   â”œâ”€â”€ LoginScreen.kt .................... Composable UI
â”‚    â”‚   â”‚   â””â”€â”€ LoginViewModel.kt ................ State manager
â”‚    â”‚   â”‚
â”‚    â”‚   â”œâ”€â”€ jobs/
â”‚    â”‚   â”‚   â”œâ”€â”€ JobCardEntryScreen.kt ............ Composable UI
â”‚    â”‚   â”‚   â””â”€â”€ JobCardEntryViewModel.kt ......... State manager
â”‚    â”‚   â”‚
â”‚    â”‚   â””â”€â”€ map/
â”‚    â”‚       â”œâ”€â”€ MainMapScreen.kt ................. Main screen UI
â”‚    â”‚       â”œâ”€â”€ MainMapViewModel.kt .............. Main ViewModel
â”‚    â”‚       â”œâ”€â”€ ManageESViewModel.kt ............. ES management
â”‚    â”‚       â”œâ”€â”€ delegates/ ....................... UI logic helpers
â”‚    â”‚       â”‚   â”œâ”€â”€ LocationManagerDelegate.kt
â”‚    â”‚       â”‚   â”œâ”€â”€ LayerManagerDelegate.kt
â”‚    â”‚       â”‚   â””â”€â”€ BasemapManagerDelegate.kt
â”‚    â”‚       â””â”€â”€ components/ ...................... Reusable UI parts
â”‚    â”‚           â”œâ”€â”€ CollectESBottomSheet.kt
â”‚    â”‚           â””â”€â”€ ManageESBottomSheet.kt
â”‚    â”‚
â”‚    â”œâ”€â”€ designsystem/ ........................... UI components
â”‚    â”‚   â”œâ”€â”€ components/
â”‚    â”‚   â”‚   â”œâ”€â”€ GdsButton.kt
â”‚    â”‚   â”‚   â”œâ”€â”€ GdsTextField.kt
â”‚    â”‚   â”‚   â””â”€â”€ ... (36+ components)
â”‚    â”‚   â””â”€â”€ theme/
â”‚    â”‚       â”œâ”€â”€ Color.kt
â”‚    â”‚       â”œâ”€â”€ Theme.kt
â”‚    â”‚       â””â”€â”€ Typography.kt
â”‚    â”‚
â”‚    â””â”€â”€ navigation/
â”‚        â””â”€â”€ NavGraph.kt ......................... App navigation
â”‚
â”œâ”€â”€â”€ ğŸ¯ DOMAIN LAYER (Business Logic)
â”‚    â”‚
â”‚    â”œâ”€â”€ domain/
â”‚    â”‚   â”œâ”€â”€ entity/ ............................. Data models
â”‚    â”‚   â”‚   â”œâ”€â”€ User.kt
â”‚    â”‚   â”‚   â”œâ”€â”€ JobCard.kt
â”‚    â”‚   â”‚   â””â”€â”€ ESDataDistance.kt
â”‚    â”‚   â”‚
â”‚    â”‚   â”œâ”€â”€ repository/ ......................... Contracts (interfaces)
â”‚    â”‚   â”‚   â”œâ”€â”€ AuthRepository.kt
â”‚    â”‚   â”‚   â””â”€â”€ ManageESRepository.kt
â”‚    â”‚   â”‚
â”‚    â”‚   â”œâ”€â”€ usecase/ ............................ Business actions
â”‚    â”‚   â”‚   â”œâ”€â”€ LoginUseCase.kt
â”‚    â”‚   â”‚   â”œâ”€â”€ DownloadESDataUseCase.kt
â”‚    â”‚   â”‚   â”œâ”€â”€ DownloadAllServicesUseCase.kt
â”‚    â”‚   â”‚   â””â”€â”€ ... (17 use cases total)
â”‚    â”‚   â”‚
â”‚    â”‚   â”œâ”€â”€ facade/ ............................. Grouped use cases
â”‚    â”‚   â”‚   â”œâ”€â”€ ManageESFacade.kt .............. Interface
â”‚    â”‚   â”‚   â””â”€â”€ ManageESFacadeImpl.kt .......... Implementation
â”‚    â”‚   â”‚
â”‚    â”‚   â””â”€â”€ config/ ............................. Configuration
â”‚    â”‚       â””â”€â”€ FeatureServiceConfiguration.kt . Environment setup
â”‚    â”‚
â”œâ”€â”€â”€ ğŸ’¾ DATA LAYER (Implementation)
â”‚    â”‚
â”‚    â”œâ”€â”€ data/
â”‚    â”‚   â”œâ”€â”€ repository/ ......................... Implementations
â”‚    â”‚   â”‚   â”œâ”€â”€ AuthRepositoryImpl.kt
â”‚    â”‚   â”‚   â””â”€â”€ ManageESRepositoryImpl.kt
â”‚    â”‚   â”‚
â”‚    â”‚   â”œâ”€â”€ api/ ................................ Network layer
â”‚    â”‚   â”‚   â”œâ”€â”€ ElectronicServicesApi.kt ....... Interface
â”‚    â”‚   â”‚   â””â”€â”€ MockElectronicServicesApi.kt ... Mock impl
â”‚    â”‚   â”‚
â”‚    â”‚   â”œâ”€â”€ local/ .............................. Database
â”‚    â”‚   â”‚   â”œâ”€â”€ AppDatabase.kt ................. Room DB
â”‚    â”‚   â”‚   â”œâ”€â”€ dao/ ........................... Data access
â”‚    â”‚   â”‚   â”‚   â””â”€â”€ LocalEditDao.kt
â”‚    â”‚   â”‚   â””â”€â”€ entity/ ........................ DB entities
â”‚    â”‚   â”‚       â””â”€â”€ LocalEditEntity.kt
â”‚    â”‚   â”‚
â”‚    â”‚   â”œâ”€â”€ mapper/ ............................. Data conversion
â”‚    â”‚   â”‚   â”œâ”€â”€ UserMapper.kt .................. DTO â†” Domain
â”‚    â”‚   â”‚   â”œâ”€â”€ JobCardMapper.kt
â”‚    â”‚   â”‚   â””â”€â”€ FeatureTypeMapper.kt
â”‚    â”‚   â”‚
â”‚    â”‚   â””â”€â”€ dto/ ................................ API data structures
â”‚    â”‚       â”œâ”€â”€ LoginRequestDto.kt
â”‚    â”‚       â””â”€â”€ LoginResponseDto.kt
â”‚    â”‚
â”œâ”€â”€â”€ ğŸ”§ DEPENDENCY INJECTION
â”‚    â”‚
â”‚    â”œâ”€â”€ di/
â”‚    â”‚   â”œâ”€â”€ NetworkModule.kt .................... HTTP client setup
â”‚    â”‚   â”œâ”€â”€ FacadeModule.kt ..................... Facade bindings
â”‚    â”‚   â”œâ”€â”€ DelegateModule.kt ................... Delegate bindings
â”‚    â”‚   â””â”€â”€ ConfigurationModule.kt .............. Config providers
â”‚    â”‚
â”œâ”€â”€â”€ ğŸŒ NETWORK
â”‚    â”‚
â”‚    â”œâ”€â”€ network/
â”‚    â”‚   â””â”€â”€ KtorClient.kt ....................... HTTP client config
â”‚    â”‚
â”œâ”€â”€â”€ ğŸ› ï¸ UTILITIES
â”‚    â”‚
â”‚    â””â”€â”€ util/
â”‚        â”œâ”€â”€ Logger.kt ........................... Logging utility
â”‚        â”œâ”€â”€ Constants.kt ........................ App constants
â”‚        â”œâ”€â”€ extensions/ ......................... Kotlin extensions
â”‚        â”œâ”€â”€ formatters/ ......................... Data formatters
â”‚        â””â”€â”€ storage/ ............................ Storage utils
â”‚
â””â”€â”€â”€ ğŸ“± APP ENTRY
     â”œâ”€â”€ GdsGpsCollectionApp.kt .................. Application class
     â””â”€â”€ MainActivity.kt .......................... Main activity
```

### Layer Interaction Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    YOUR CODE LIVES HERE                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚
        â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Presentation â”‚    â”‚   Domain     â”‚    â”‚     Data     â”‚
â”‚              â”‚â”€â”€â”€â–¶â”‚              â”‚â—€â”€â”€â”€â”‚              â”‚
â”‚ ui/          â”‚    â”‚ domain/      â”‚    â”‚ data/        â”‚
â”‚              â”‚    â”‚              â”‚    â”‚              â”‚
â”‚ â€¢ Screens    â”‚    â”‚ â€¢ Entities   â”‚    â”‚ â€¢ Repos Impl â”‚
â”‚ â€¢ ViewModels â”‚    â”‚ â€¢ Use Cases  â”‚    â”‚ â€¢ API        â”‚
â”‚ â€¢ State      â”‚    â”‚ â€¢ Interfaces â”‚    â”‚ â€¢ Database   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                    â–²                    â–²
        â”‚                    â”‚                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    Can ONLY depend on
                      Domain Layer
                             â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚                   â”‚
                   â–¼                   â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ Design Systemâ”‚    â”‚   Utilities  â”‚
           â”‚              â”‚    â”‚              â”‚
           â”‚ Components   â”‚    â”‚ Logger       â”‚
           â”‚ Theme        â”‚    â”‚ Extensions   â”‚
           â”‚ Colors       â”‚    â”‚ Formatters   â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Summary

These visual guides should help you understand:

1. **Layer Organization** - What goes where and why
2. **Data Flow** - How requests move through the system
3. **Environment Switching** - How to change between Wildfire and Project
4. **Dependency Injection** - How Hilt wires everything together
5. **Package Structure** - Where to find things in the codebase

**Tip:** Print these diagrams or keep them open while coding. Refer to them when you get lost!

For more detailed explanations, see:

- `LEARNING_GUIDE.md` - Step-by-step learning guide
- `ARCHITECTURE.md` - Comprehensive architecture documentation
- `QUICK_START.md` - Getting started guide
